:root{
  --radius: 14px;
  --radius-small: 10px;
  --border: 1px solid rgba(0,0,0,0.12);
  --shadow: 0 6px 18px rgba(0,0,0,0.10);
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

html {
  color-scheme: light;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: var(--font);
  line-height:1.35;
}

.app-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 16px;
  gap:12px;
  border-bottom: var(--border);
}

.brand{ display:flex; align-items:center; gap:12px; }
.aed-icon{
  appearance:none;
  background:none;
  border: var(--border);
  width:40px;
  height:40px;
  display:grid;
  place-items:center;
  border-radius:999px;
  font-size:18px;
  cursor:pointer;
  user-select:none;
  padding:0;
}

.brand-text h1{
  font-size:18px;
  margin:0;
}
.tagline{
  margin:2px 0 0 0;
  font-size:13px;
  opacity:0.85;
}

.header-actions{ display:flex; gap:10px; align-items:center; }

.info-btn{
  background:none;
  border: var(--border);
  width:40px;
  height:40px;
  border-radius:999px;
  display:grid;
  place-items:center;
  font-size:18px;
  cursor:pointer;
}

.info-modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:20000;
}

.info-modal.active{
  display:flex;
}

.info-modal-content{
  background:white;
  width:min(90%, 420px);
  padding:20px;
  border-radius:14px;
  box-shadow:0 10px 40px rgba(0,0,0,0.25);
  position:relative;
}

.info-close-btn{
  position:absolute;
  top:12px;
  right:12px;
  background:none;
  border:none;
  font-size:20px;
  cursor:pointer;
}

.app-main{
  padding:12px;
  display:flex;
  flex-direction:column;
  flex:1;
  min-height:0;
}

/* Desktop default */
.controls{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:10px;
  margin-bottom:12px;
}

/* Filters wrapper (desktop default = inline with others) */
.filters-row{
  display:flex;
  gap:10px;
}

.select{
  display:flex;
  align-items:center;
  gap:8px;
  border: var(--border);
  border-radius: var(--radius-small);
  padding:8px 10px;
}
.select span{ font-size:12px; opacity:0.85; }
.select select{
  border:none;
  background:transparent;
  font: inherit;
  outline:none;
}

.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:10px 12px;
  border-radius: var(--radius-small);
  border: var(--border);
  text-decoration:none;
  cursor:pointer;
  user-select:none;
  font-weight:600;
  font-size:14px;
}
.btn:focus{ outline: 3px solid rgba(0,0,0,0.18); outline-offset:2px; }

.s-row{
  display:flex;
  align-items:center;
  gap:10px;
}

/* Results count styling */
.results-count{
  font-size:13px;
  font-weight:600;
  opacity:0.75;
  white-space:nowrap;
}

.results-count{
  font-size:13px;
  opacity:0.8;
  font-weight:600;
}

.content{
  display:grid;
  grid-template-columns: minmax(280px, 32%) 1fr;
  gap:12px;
  flex:1;
  min-height:0;
}

.panel{
  border: var(--border);
  border-radius: var(--radius);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  min-height:0;
}

.panel-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px;
  border-bottom: var(--border);
  gap:10px;
}

.panel-toggle{
  border:none;
  background:transparent;
  font: inherit;
  font-weight:800;
  cursor:pointer;
  padding:6px 8px;
  border-radius: var(--radius-small);
}
.panel-toggle:focus{ outline: 3px solid rgba(0,0,0,0.18); outline-offset:2px; }

.panel-meta{ font-size:12px; opacity:0.85; }

.meta-text{
  font-size:13px;
  opacity:0.9;
}

.meta-parish{
  font-size:14px;
  font-weight:700;
  display:inline-flex;
  align-items:center;
}

.meta-address{
  font-size:12px;
  opacity:0.75;
  display:inline-flex;
  align-items:center;
}

.panel-body{
  padding:12px;
  overflow:auto;
  flex:1;
}

.panel-note{
  font-size:13px;
  border: var(--border);
  border-radius: var(--radius-small);
  padding:10px;
  margin-bottom:10px;
}

.results{ display:flex; flex-direction:column; gap:10px; }

.card{
  border: var(--border);
  border-radius: var(--radius);
  padding:10px;
  box-shadow: var(--shadow);
}

.card.nearest{
  border-width:2px;
}

.card h3{
  margin:0 0 6px 0;
  font-size:15px;
}

.card.nearest h3 {
  font-weight: 800;
  color: #b71c1c; /* dark red */
}

.meta-row{
  display:flex;
  flex-wrap:wrap;
  align-items:center;   /* <-- this is the key */
  gap:8px 10px;
  margin:6px 0 10px 0;
}

.badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 8px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
}


/* --- Status Badge Colours (25% tinted fill) --- */

.badge.status-Active{
  background: rgba(46,125,50,0.25);
  color: #2e7d32;
  border: 2px solid #2e7d32;
}

.badge.status-Out\ of\ Service{
  background: rgba(136,136,136,0.25);
  color: #888888;
  border: 2px solid #888888;
}

.badge.status-Unknown{
  background: rgba(11,46,107,0.25);
  color: #0b2e6b;
  border: 2px solid #0b2e6b;
}


.card-actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.card-actions .btn{ padding:8px 10px; font-size:13px; }

.small{
  font-size:12px;
  opacity:0.9;
  margin:6px 0 0 0;
}

.map-wrap{
  border: var(--border);
  border-radius: var(--radius);
  overflow:hidden;
  height:100%;
}

.map{
  height:100%;
}

.app-footer{
  padding:12px 16px;
  border-top: var(--border);
  font-size:12px;
  opacity:0.9;
}

.release-meta{
  font-size:12px;
  opacity:0.75;
  margin-bottom:6px;
}

/* Collapsed panel (desktop) */
.panel.collapsed .panel-body{ display:none; }
.panel.collapsed{ min-height: unset; }

.app-footer{
  display:none;
}

body{
  margin:0;
  font-family: var(--font);
  line-height:1.35;

  display:flex;
  flex-direction:column;
  min-height:100vh;
}

/* Mobile */
@media (max-width: 900px){
  .content{ grid-template-columns: 1fr; }

  .map-wrap{
    height: auto;
    min-height: 0;
  }

  .controls-secondary{ margin-left:0; width:100%; }
}

/* --- Map Legend --- */

.map-legend{
  background:white;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(0,0,0,0.15);
  box-shadow:0 4px 14px rgba(0,0,0,0.12);
  font-size:13px;
  line-height:1.4;
}

.legend-title{
  font-weight:700;
  margin-bottom:6px;
}

.legend-item{
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:4px;
}

.legend-dot{
  width:12px;
  height:12px;
  border-radius:50%;
  display:inline-block;
  border:2px solid #ffffff;
}

.legend-pin-svg{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:18px;
}

.legend-nearest{
  width:14px;
  height:14px;
  border-radius:50%;
  background:white;
  border:3px solid #b71c1c;
  display:inline-block;
}


.updated-meta{
  font-size:12px;
  font-weight:400;
  margin-left:10px;
  opacity:0.75;
}

@media (max-width: 600px){

  /* ---- Header compact ---- */

  .app-header{
    padding:8px 12px;
  }

  .brand-text h1{
    font-size:16px;
  }

  .tagline{
    display:none;
  }

  .updated-meta{
    font-size:11px;
  }

  /* ---- Controls layout ---- */

  .controls{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
  }

  /* First two children = s */
  .controls > .btn{
    flex:1 1 calc(50% - 4px);
  }

  /* Filters row should take full width */
  .filters-row{
    flex:1 1 100%;
  }

  /* Filters row */
  .filters-row{
    display:flex;
    gap:8px;
    width:100%;
  }

  .filters-row .select{
    flex:1;
    min-width:0;
  }

  /* Compact sizing */

  .btn{
    padding:8px 10px;
    font-size:13px;
  }

  .s-row{
    display:flex;
    gap:8px;
  }

  .s-row .btn{
    flex:1;
  }

  .results-count{
    font-size:12px;
    opacity:0.7;
  }
  
  .select{
    font-size:12px;
    padding:4px 6px;
  }

  .select span{
    font-size:10px;
  }

  .select select{
    font-size:13px;
  }

  .panel-header{
    padding:8px 10px;
  }

  /* Hide mobile tip */
  #geoNote{
    display:none;
  }

  .results-count{
    font-size:12px;
    opacity:0.75;
  }

  #map {
    height: 40vh;
  }

  #map + * {
    margin-top: 0;
  }

  .panel:has(#map) {
    padding-bottom: 0;
  }
  
}

.image-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  display:none;              /* <-- IMPORTANT */
  align-items:center;
  justify-content:center;
  z-index:10000;
}

.image-overlay.active{
  display:flex;              /* <-- only visible when active */
}

.image-overlay img{
  max-width:95%;
  max-height:95%;
  border-radius:10px;
  box-shadow:0 10px 40px rgba(0,0,0,0.4);
}

.overlay-close-btn{
  position:absolute;
  top:16px;
  right:16px;
  background:rgba(0,0,0,0.6);
  color:white;
  border:none;
  font-size:20px;
  width:40px;
  height:40px;
  border-radius:50%;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}

.overlay-close-btn:hover{
  background:rgba(0,0,0,0.8);
}

/* Hide the Results panel header (keep in DOM so JS doesn't break) */
.panel-header{
  display: none !important;
}

button {
  white-space: nowrap;
}

.buttons-row{
  display:flex;
  align-items:center;
  gap:10px;
}

.leaflet-container {
  background: white !important;
}
